#include<string.h>
#include<stdio.h>

__attribute__((noinline)) 
void foo(char *unused) { printf("foo\n"); }

__attribute__((noinline)) 
void bar(char *unused) { printf("bar\n"); }

int main(int argc, const char** argv) {
        void (*fptr)(char*) = &foo;
	char buffer[4];
	
	if (argc > 100) fptr = &bar;

	printf("function table index: %p\n", fptr);

	scanf("%s", buffer);

	(*fptr)("run it");

	printf("function table index: %p\n", fptr);

        return 0;
}

